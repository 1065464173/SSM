1. 简单的 web 层，service 层(dubbo 通信)，数据库不做限制，出现超卖现象。单机极限并发 350(tomcat 最大线程 250)。
2. 数据库采用乐观锁更新，库存总数放入 Redis(并不会经常更新)
3. web 层，service 层分布式部署，提高吞吐量。
4. web 层做限流，每个 UID 限制每秒 N 次请求，多余的请求直接过滤。
5. service 层限流，先用单机限流，如令牌桶算法。再用 Redis 做全局限流。